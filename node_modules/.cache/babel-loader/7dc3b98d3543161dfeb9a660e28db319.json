{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/storage';\nexport const loadUser = uid => {\n  return new Promise((resolve, reject) => {\n    firebase.database().ref(\"/users/\".concat(uid)).once('value').then(snapshot => {\n      const userData = snapshot.val();\n\n      if (userData.avatar) {\n        // cargar url de avatar\n        firebase.storage().ref().child(\"/avatars/\".concat(userData.avatar)).getDownloadURL().then(url => {\n          userData.avatar = url;\n          resolve(userData);\n        }, error => {\n          resolve(userData);\n        });\n      } else {\n        resolve(userData);\n      }\n    }).catch(error => {\n      reject(new Error('Error al leer los datos del usuario'));\n    });\n  });\n};","map":{"version":3,"sources":["C:\\Users\\brito\\Desktop\\Tareas\\Tarea C1 2020\\Programacion web\\firebase-chat\\src\\utils\\dbUtils.js"],"names":["firebase","loadUser","uid","Promise","resolve","reject","database","ref","once","then","snapshot","userData","val","avatar","storage","child","getDownloadURL","url","error","catch","Error"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,mBAAP;AACA,OAAO,kBAAP;AAEA,OAAO,MAAMC,QAAQ,GAAIC,GAAD,IAAS;AAC/B,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCL,IAAAA,QAAQ,CAACM,QAAT,GACGC,GADH,kBACiBL,GADjB,GAEGM,IAFH,CAEQ,OAFR,EAGGC,IAHH,CAGQC,QAAQ,IAAI;AAChB,YAAMC,QAAQ,GAAGD,QAAQ,CAACE,GAAT,EAAjB;;AACA,UAAID,QAAQ,CAACE,MAAb,EAAqB;AACnB;AACAb,QAAAA,QAAQ,CAACc,OAAT,GAAmBP,GAAnB,GAAyBQ,KAAzB,oBAA2CJ,QAAQ,CAACE,MAApD,GACCG,cADD,GACkBP,IADlB,CACwBQ,GAAD,IAAS;AAC9BN,UAAAA,QAAQ,CAACE,MAAT,GAAkBI,GAAlB;AACAb,UAAAA,OAAO,CAACO,QAAD,CAAP;AACD,SAJD,EAKCO,KAAD,IAAW;AACTd,UAAAA,OAAO,CAACO,QAAD,CAAP;AACD,SAPD;AAQD,OAVD,MAUO;AACLP,QAAAA,OAAO,CAACO,QAAD,CAAP;AACD;AACF,KAlBH,EAmBGQ,KAnBH,CAmBUD,KAAD,IAAW;AAChBb,MAAAA,MAAM,CAAC,IAAIe,KAAJ,CAAU,qCAAV,CAAD,CAAN;AACD,KArBH;AAsBD,GAvBM,CAAP;AAwBD,CAzBM","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/storage';\n\nexport const loadUser = (uid) => {\n  return new Promise((resolve, reject) => {\n    firebase.database()\n      .ref(`/users/${uid}`)\n      .once('value')\n      .then(snapshot => {\n        const userData = snapshot.val();\n        if (userData.avatar) {\n          // cargar url de avatar\n          firebase.storage().ref().child(`/avatars/${userData.avatar}`)\n          .getDownloadURL().then((url) => {\n            userData.avatar = url;\n            resolve(userData);\n          },\n          (error) => {\n            resolve(userData);\n          });\n        } else {\n          resolve(userData);\n        }\n      })\n      .catch((error) => {\n        reject(new Error('Error al leer los datos del usuario'));\n      });\n  });\n};\n\n"]},"metadata":{},"sourceType":"module"}